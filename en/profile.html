<!doctype html>
<html lang="en">
<head>

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8232569132678992"
            crossorigin="anonymous"></script>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Maker Profile</title>

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8232569132678992"
            crossorigin="anonymous"></script>

    <style>
        :root {
            --sidebar-w: 220px;
            --sidebar-collapsed-w: 64px;
            --sidebar-bg: #ffd6e8;
            --page-max-w: 1000px;
            --page-pad: 20px;
        }

        html.site-sidebar-collapsed {
            --sidebar-w: var(--sidebar-collapsed-w);
        }

        site-sidebar:not(:defined) {
            display: none;
        }

        site-sidebar {
            position: fixed;
            left: 0;
            top: 0;
            bottom: 0;
            width: var(--sidebar-w);
            z-index: 60;
        }

        .page-wrap {
            margin-left: var(--sidebar-w);
            width: calc(100% - var(--sidebar-w));
            transition: margin-left .25s ease, width .25s ease;
            display: flex;
            justify-content: center;
            box-sizing: border-box;
            padding-left: var(--page-pad);
            padding-right: var(--page-pad);
        }

        .content {
            max-width: var(--page-max-w);
            width: 100%;
            box-sizing: border-box;
        }

        * {
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
        }

        body {
            font-family: 'Inter', Arial, sans-serif;
            margin: 0;
            padding: 20px 20px 0 20px;
            color: #0f1724;
            background: #ffffff;
            overflow-x: hidden;
        }

        a {
            color: #2563eb;
            text-decoration: none;
        }

            a:hover {
                text-decoration: underline;
            }

        .back-link {
            display: inline-block;
            margin-bottom: 20px;
            font-weight: bold;
        }

        h1 {
            margin: 0 0 8px 0;
            font-size: 2.5rem;
        }

        .location {
            color: #64748b;
            font-size: 1rem;
            font-weight: 500;
            margin: 0 0 16px 0;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .short-bio {
            font-size: 1.1rem;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid #e2e8f0;
        }

        .gallery-container {
            display: flex;
            gap: 16px;
            margin-bottom: 30px;
            height: 500px;
            align-items: stretch;
        }

        .main-view {
            flex: 1;
            position: relative;
            background: #f1f5f9;
            border-radius: 12px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 0;
        }

            .main-view img {
                max-width: 100%;
                max-height: 100%;
                width: auto;
                height: auto;
                object-fit: contain;
                cursor: zoom-in;
                user-select: none;
            }

        .nav-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0,0,0,0.5);
            color: white;
            border: none;
            padding: 10px;
            cursor: pointer;
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            user-select: none;
            transition: background 0.15s;
            z-index: 2;
        }

            .nav-btn:hover {
                background: rgba(0,0,0,0.75);
            }

            .nav-btn.left {
                left: 10px;
            }

            .nav-btn.right {
                right: 10px;
            }

        .thumbnails {
            width: 100px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            overflow-y: auto;
            overflow-x: hidden;
            padding-right: 6px;
            max-height: 100%;
        }

        .thumb {
            width: 100%;
            height: 100px;
            display: block;
            object-fit: cover;
            background: #fff;
            border-radius: 8px;
            cursor: pointer;
            opacity: 0.95;
            transition: transform .15s, opacity .15s;
            border: 2px solid transparent;
            flex: none;
        }

            .thumb:hover {
                transform: translateY(-2px);
                opacity: 1;
            }

            .thumb.active {
                border-color: #2563eb;
            }

        .long-info {
            background: #f8fafc;
            padding: 20px;
            border-radius: 12px;
            line-height: 1.6;
            white-space: pre-wrap;
            margin-bottom: 30px;
        }

        .contact-section {
            border-top: 1px solid #e2e8f0;
            padding-top: 20px;
        }

        .contact-item {
            margin-bottom: 8px;
            font-size: 1.05rem;
        }

        .contact-key {
            font-weight: bold;
            margin-right: 5px;
        }

        .overlay {
            position: fixed;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(15, 23, 36, 0.85);
            z-index: 9999;
            padding: 24px;
            cursor: zoom-out;
        }

            .overlay img {
                max-width: 95%;
                max-height: 95%;
                object-fit: contain;
                border-radius: 8px;
                box-shadow: 0 10px 40px rgba(2,6,23,0.6);
                user-select: none;
                -webkit-user-drag: none;
            }

        .confirm-overlay {
            position: fixed;
            inset: 0;
            background: rgba(2,6,23,0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 20000;
            padding: 20px;
        }

        .confirm-dialog {
            width: 100%;
            max-width: 480px;
            background: #fff0f6;
            border-radius: 12px;
            box-shadow: 0 8px 30px rgba(2,6,23,0.35);
            padding: 20px;
            text-align: center;
            color: #0f1724;
        }

            .confirm-dialog p {
                margin: 0 0 18px 0;
                font-size: 1.05rem;
            }

        .confirm-actions {
            display: flex;
            gap: 12px;
            justify-content: center;
        }

        .btn-accept {
            background: #ff2b8a;
            color: white;
            border: none;
            padding: 10px 16px;
            border-radius: 8px;
            font-weight: 700;
            cursor: pointer;
        }

        .btn-cancel {
            background: #e6e9ee;
            color: #334155;
            border: none;
            padding: 10px 16px;
            border-radius: 8px;
            font-weight: 700;
            cursor: pointer;
        }

        @media (max-width: 768px) {
            :root {
                --sidebar-w: var(--sidebar-collapsed-w);
            }

            .page-wrap {
                padding-left: 12px;
                padding-right: 12px;
            }

            .gallery-container {
                flex-direction: column;
                height: auto;
            }

            .main-view {
                height: 350px;
            }

            .thumbnails {
                flex-direction: row;
                width: 100%;
                overflow-x: auto;
                overflow-y: hidden;
                height: auto;
                max-height: none;
                padding-right: 0;
            }

            .thumb {
                width: 80px;
                height: 80px;
                flex-shrink: 0;
                object-fit: cover;
            }
        }
    </style>

    <script type="module" src="/scripts/site-sidebar.js"></script>
</head>
<body>
    <site-sidebar collapsible logo-src="/assets/logo/logo.png" bg="#ffe6f0">

        <a href="search.html">Search makers</a>
        <a href="https://forms.gle/6boFuotq8T9DGy4v6">Add me</a>
        <a href="cleaning.html">Fursuit Cleaning</a>
        <a href="about.html">About the site</a>

    </site-sidebar>

    <div class="page-wrap">
        <main class="content">
            <a href="search.html" class="back-link">← Back</a>
            <div id="content"></div>
        </main>
    </div>

    <script>
        function getParam(name) { return new URLSearchParams(location.search).get(name); }
        function escapeHtml(s) { return String(s || '').replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;'); }
        function capitalize(s) { if (!s) return ''; return s.charAt(0).toUpperCase() + s.slice(1); }

        let currentImages = [];
        let currentIndex = 0;
        let overlayOpen = false;
        let overlayEl = null;

        function updateGalleryDisplay() {
            const mainImg = document.getElementById('mainImage');
            if (currentImages.length > 0 && mainImg) mainImg.src = currentImages[currentIndex];
            document.querySelectorAll('.thumb').forEach((t, idx) => t.classList.toggle('active', idx === currentIndex));
        }

        function setIndex(i) { currentIndex = i; updateGalleryDisplay(); }
        function nextImage() { if (!currentImages.length) return; currentIndex = (currentIndex + 1) % currentImages.length; updateGalleryDisplay(); }
        function prevImage() { if (!currentImages.length) return; currentIndex = (currentIndex - 1 + currentImages.length) % currentImages.length; updateGalleryDisplay(); }

        function openOverlay(index) {
            if (overlayOpen) return;
            overlayOpen = true;
            const imgSrc = currentImages[index] || '';
            overlayEl = document.createElement('div');
            overlayEl.className = 'overlay';
            overlayEl.innerHTML = `<img src="${escapeHtml(imgSrc)}" alt="Full size photo">`;
            document.body.appendChild(overlayEl);
            document.body.style.overflow = 'hidden';
            history.pushState({ overlay: true }, '', '#photo' + index);

            overlayEl.addEventListener('click', (ev) => {
                if (ev.target === overlayEl || ev.target.tagName === 'IMG') {
                    history.back();
                }
            });
        }

        function closeOverlay() {
            if (!overlayOpen) return;
            overlayOpen = false;
            if (overlayEl && overlayEl.parentNode) overlayEl.parentNode.removeChild(overlayEl);
            overlayEl = null;
            document.body.style.overflow = '';
        }

        window.addEventListener('popstate', (ev) => {
            const state = ev.state || {};
            if (overlayOpen && !state.overlay) {
                closeOverlay();
            }
        });

        window.addEventListener('keydown', (ev) => {
            if (ev.key === 'Escape' || ev.key === 'Esc') {
                if (overlayOpen) history.back();
                const conf = document.querySelector('.confirm-overlay');
                if (conf) conf.remove();
            }
        });

        function adjustForBottomBar() {
            const bar = document.querySelector('.donate-bar-bundle');
            if (!bar) {
                document.body.style.paddingBottom = '';
                document.querySelector('.page-wrap').style.paddingBottom = '';
                return;
            }
            const h = bar.offsetHeight || 0;
            document.body.style.paddingBottom = (h + 12) + 'px';
            document.querySelector('.page-wrap').style.paddingBottom = (h + 12) + 'px';
        }

        const barObserver = new MutationObserver(() => {
            adjustForBottomBar();
        });
        barObserver.observe(document.body, { childList: true, subtree: true });

        window.addEventListener('resize', adjustForBottomBar);
        window.addEventListener('load', () => {
            setTimeout(adjustForBottomBar, 100);
        });

        function createConfirmModal(href, originalTarget) {
            if (document.querySelector('.confirm-overlay')) return;
            const overlay = document.createElement('div');
            overlay.className = 'confirm-overlay';
            // Texto traducido con cuidado para mantener el aviso de seguridad
            overlay.innerHTML = `
                                    <div class="confirm-dialog" role="dialog" aria-modal="true" aria-labelledby="confirm-title">
                                        <p id="confirm-title">
                                        <p>The fursuit makers on this page have been reviewed, but always remember to do your research when buying a fursuit online to ensure you are not being scammed.
                                        <p>Before contacting any fursuit maker, remember to first check if their website or social media states that commissions are open to avoid disturbing them.
                                        <p>Don't forget to tell the maker you found them thanks to the <strong>I Want a Fursuit!</strong> website.</p>
                                        <div class="confirm-actions">
                                            <button class="btn-accept" type="button">Accept</button>
                                            <button class="btn-cancel" type="button">Cancel</button>
                                        </div>
                                    </div>
                                `;
            document.body.appendChild(overlay);
            const btnAccept = overlay.querySelector('.btn-accept');
            const btnCancel = overlay.querySelector('.btn-cancel');

            function clean() {
                const o = document.querySelector('.confirm-overlay');
                if (o) o.remove();
            }

            btnCancel.addEventListener('click', () => { clean(); });
            btnAccept.addEventListener('click', () => {
                clean();
                if (originalTarget === '_self') {
                    window.location.href = href;
                } else {
                    window.open(href, '_blank', 'noopener');
                }
            });

            overlay.addEventListener('click', (ev) => {
                if (ev.target === overlay) clean();
            });
        }

        function attachContactConfirmHandlers() {
            const contactLinks = document.querySelectorAll('.contact-section a');
            contactLinks.forEach(a => {
                if (a.dataset.confirmAttached === '1') return;
                a.dataset.confirmAttached = '1';
                a.addEventListener('click', (ev) => {
                    ev.preventDefault();
                    ev.stopPropagation();
                    const href = a.href;
                    createConfirmModal(href, a.target || '_blank');
                });
            });
        }

        async function load() {
            const id = getParam('id');
            const contentEl = document.getElementById('content');
            if (!id) {
                contentEl.innerHTML = `
            <div class="error-container">
                <h2>Maker ID Not Specified</h2>
                <p>Please ensure that the web address is correct and contains the ID of the Fursuit Maker you wish to search for.</p>
                <p>This website is a directory dedicated to promoting talented Fursuit Makers from around the world, helping enthusiasts find the perfect artist for their project. You can return to the main directory page to search for other creators.</p>
            </div>
        `;
                return;
            }


            try {
                const r = await fetch('/makers.json');
                const makers = await r.json();
                const m = makers.find(x => x.id === id);
                if (!m) {
                    contentEl.innerHTML = `
                <div class="error-container">
                    <h2>Maker Not Found</h2>
                    <p>We regret to inform you that the creator profile you are looking for is not in our directory or has been recently removed.</p>
                    <p>Our database is constantly updated to offer the most accurate information about Fursuit Makers in the community. If you believe this is an error, please contact us.</p>
                    <p>Meanwhile, we invite you to explore the list of other featured makers. Remember that this site is a platform to connect fans with artists, promoting diversity and quality in the art of fursuiting.</p>
                </div>
            `;
                    return;
                }

                currentImages = m.images || [];
                let contactHtml = '';
                if (m.contact) {
                    for (const [key, url] of Object.entries(m.contact)) {
                        contactHtml += `<div class="contact-item"><span class="contact-key">${capitalize(key)}:</span><a href="${escapeHtml(url)}" target="_blank" rel="noopener noreferrer">${escapeHtml(url)}</a></div>`;
                    }
                } else contactHtml = '<p>No contact information.</p>';

                const thumbsHtml = currentImages.map((img, idx) =>
                    `<img src="${img}" class="thumb ${idx === 0 ? 'active' : ''}" onclick="setIndex(${idx})" loading="lazy" alt="Thumbnail ${idx + 1}">`
                ).join('');

                contentEl.innerHTML = `
                                    <h1>${escapeHtml(m.name)}</h1>
                                    <div class="location">📍 <span>${escapeHtml(m.countryname || '')}${m.country ? ', ' + escapeHtml(m.country) : ''}</span></div>
                                    <p class="short-bio">${escapeHtml(m.bio)}</p>
                                    ${currentImages.length ? `
                                        <div class="gallery-container">
                                            <div class="main-view" aria-live="polite">
                                                <button class="nav-btn left" onclick="prevImage()" aria-label="Previous image" title="Previous">
                                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M15 18l-6-6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                                                </button>
                                                <img id="mainImage" src="${currentImages[0]}" alt="Main image">
                                                <button class="nav-btn right" onclick="nextImage()" aria-label="Next image" title="Next">
                                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M9 6l6 6-6 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                                                </button>
                                            </div>
                                            <div class="thumbnails" role="list">${thumbsHtml}</div>
                                        </div>
                                    ` : '<p>No images available.</p>'}
                                    <h3>Information</h3>
                                    <div class="long-info">${escapeHtml(m.info)}</div>
                                    <h3>Contact</h3>
                                    <div class="contact-section">${contactHtml}</div>
                                    <div class="editor-notes">
                                        <hr>
                                        <h4>About Fursuit Makers and this Directory</h4>
                                        <p>This page is dedicated to showcasing the work and contact information of **${escapeHtml(m.name)}**, a talented Fursuit Maker. The fursuiter community is wonderful, and these artisans are the heart of it, transforming designs into tangible characters. We encourage you to explore this maker's gallery to see the quality and style of their creations.</p>
                                        <p>The contact information provided is directly what the maker has supplied. We always recommend that interested parties conduct thorough research and read reviews before commissioning a fursuit. Our mission is to be a directory that facilitates connection, but we are not responsible for transactions or the final quality of the work.</p>
                                        <p>If you are a Fursuit Maker and wish to appear or update your profile, please click the "Add me" button in the sidebar.</p>
                                    </div>
                                    `;

                const mainImg = document.getElementById('mainImage');
                if (mainImg) mainImg.addEventListener('click', () => openOverlay(currentIndex));

                document.querySelectorAll('.thumb').forEach((el, idx) => {
                    el.addEventListener('click', () => {
                        setIndex(idx);
                        el.scrollIntoView({ block: 'nearest', inline: 'nearest', behavior: 'smooth' });
                    });
                });

                updateGalleryDisplay();

                attachContactConfirmHandlers();

                adjustForBottomBar();
            } catch (e) {
                console.error(e);
                contentEl.innerHTML = '<p>Error loading data.</p>';
            }
        }

        window.setIndex = setIndex;
        window.nextImage = nextImage;
        window.prevImage = prevImage;
        window.openOverlay = openOverlay;

        load();
    </script>

    <script src="scripts/bottom-bar.js" defer></script>

    

</body>

</html>

